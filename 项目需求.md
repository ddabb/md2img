# Markdown转图片工具需求文档

## 项目概述
开发一个C#工具库，能够将Markdown文件渲染后转换成一张或多张图片，支持自定义模板，方便在各种场景下使用，包括但不限于微信公众号。该工具将发布为NuGet包，方便随时随地使用。

## 功能需求

### 1. Markdown解析与渲染
- 支持标准Markdown语法
- 支持代码高亮
- 支持表格、列表、引用等常用Markdown元素
- 支持图片嵌入

### 2. 自定义模板系统
- 提供默认模板
- 支持用户自定义模板
- 模板可定义样式、布局、字体等
- 支持模板变量（如标题、作者、日期等）

### 3. 图片生成
- 将渲染后的HTML转换为高质量图片
- 支持自动分页（根据内容长度自动拆分为多张图片）
- 支持调整图片尺寸、质量
- 支持添加水印

### 4. 输出与保存
- 支持将生成的图片保存到本地指定路径
- 支持多种图片格式（PNG、JPEG等）
- 支持批量处理和输出

### 5. 命令行界面
- 提供简单易用的命令行接口
- 支持批量处理多个Markdown文件
- 提供进度显示和错误处理

### 6. 可选图形界面
- 提供简单的图形用户界面（可选功能）
- 支持拖放文件
- 实时预览功能

## 技术栈
- 语言：C#/.NET
- Markdown解析：Markdig或Markdown.NET
- HTML渲染：可考虑使用内置WebView或HtmlRenderer
- 图片生成：System.Drawing或SkiaSharp
- 模板引擎：Razor或Scriban
- 命令行接口：System.CommandLine或CommandLineParser

## 项目结构
```
Md2Image/
├── src/
│   ├── Md2Image/              # 核心库项目
│   │   ├── Core/              # 核心功能
│   │   ├── Markdown/          # Markdown处理相关
│   │   ├── Templates/         # 模板系统
│   │   ├── Rendering/         # HTML渲染
│   │   ├── ImageGeneration/   # 图片生成
│   │   └── Utils/             # 工具函数
│   ├── Md2Image.Cli/          # 命令行工具项目
│   └── Md2Image.Tests/        # 测试项目
├── templates/                 # 默认模板
└── samples/                   # 示例文件
```

## 配置项
- 默认模板设置
- 图片生成参数（尺寸、质量、格式等）
- 分页规则
- 字体和样式设置

## 使用流程
1. 用户准备Markdown文件
2. 用户选择模板和配置参数
3. 工具渲染Markdown并生成图片
4. 用户预览生成的图片
5. 用户保存图片到本地

## 后续扩展可能性
- 支持更多Markdown扩展语法
- 提供GUI界面
- 批量处理功能增强
- 图片优化和压缩
- 与其他系统集成的API
- 支持更多自定义选项
